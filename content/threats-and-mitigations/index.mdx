---
title: 'npm: 보안 위협과 대응 방안'
---

이 페이지는 npm이 직면한 가장 일반적인 공격들의 개요, 이러한 공격을 완화하는 방법에 대한 고수준 설명, 그리고 더 많은 정보에 대한 링크를 제공하기 위해 작성되었습니다.

## 계정 탈취

### 비밀번호 침해를 통한 탈취

이는 npm뿐만 아니라 모든 웹 서비스에서 가장 흔한 공격입니다. 계정을 보호하는 가장 좋은 방법은 [2단계 인증을 활성화][configuring-2fa]하는 것입니다(2FA). 가장 강력한 옵션은 기기에 내장되어 있거나 외부 하드웨어 키인 보안 키를 사용하는 것입니다. 이는 인증을 접속하려는 사이트에 바인딩하여 피싱을 매우 어렵게 만듭니다. 하지만 모든 사람이 보안 키에 접근할 수 있는 것은 아니므로, 우리는 2FA를 위해 일회용 패스코드를 생성하는 인증 앱도 지원합니다.

이 공격이 너무 흔하고 npm 패키지가 더 넓은 소프트웨어 생태계에 매우 중요하기 때문에, 우리는 npm 패키지 관리자들에게 2FA를 의무화하는 단계적 접근을 취했습니다. 이미 [상위 100개 패키지 관리자](https://github.blog/2022-02-01-top-100-npm-package-maintainers-require-2fa-additional-security/)와 [상위 500개 패키지 관리자](https://github.blog/changelog/2022-05-31-top-500-npm-package-maintainers-now-require-2fa/)에게 적용되었으며, 가까운 미래에 모든 영향력이 큰 패키지(주간 100만 이상 다운로드 또는 500개 이상의 의존성을 가진 패키지)의 관리자들도 의무적으로 2FA에 등록될 예정입니다.

우리는 또한 비밀번호가 당분간 사라지지 않을 것이라는 점도 알고 있습니다. 2FA를 선택하지 않은 사용자들을 위해, 우리는 [이메일로 전송되는 일회용 비밀번호][email-otp]를 통해 향상된 로그인 검증을 수행하여 계정 탈취를 방지합니다.

### 만료된 이메일 도메인 등록을 통한 탈취

계정을 탈취하는 또 다른 방법은 만료된 도메인을 이메일 주소로 사용하는 계정을 식별하는 것입니다. 공격자는 만료된 도메인을 등록하고 계정 등록에 사용된 이메일 주소를 재생성할 수 있습니다. 계정의 등록된 이메일 주소에 접근할 수 있게 되면 공격자는 2FA로 보호되지 않은 계정을 비밀번호 재설정을 통해 탈취할 수 있습니다.

패키지가 게시될 때, **패키지가 게시된 시점의** 계정과 연결된 이메일 주소가 공개 메타데이터에 포함됩니다. 공격자들은 이 공개 데이터를 활용하여 계정 탈취에 취약할 수 있는 계정을 식별할 수 있습니다. 중요한 점은 **패키지의 공개 메타데이터에 저장된 이메일 주소는 관리자가 이메일 주소를 업데이트할 때 업데이트되지 않는다**는 것입니다. 따라서 만료된 도메인 탈취에 취약한 계정을 식별하기 위해 공개 메타데이터를 크롤링하면 실제로는 취약하지 않은 계정도 취약한 것처럼 보이는 오탐지가 발생할 수 있습니다.

npm은 주기적으로 계정의 이메일 주소가 만료된 도메인이나 유효하지 않은 MX 레코드를 가지고 있는지 확인합니다. 도메인이 만료된 경우, 우리는 해당 계정의 비밀번호 재설정을 비활성화하고 사용자가 계정 복구를 거치거나 성공적인 인증 과정을 거친 후에만 비밀번호를 재설정할 수 있도록 요구합니다.

## 악성 패키지 업로드

### "타이포스쿼팅" / 의존성 혼동을 통한 업로드

공격자들은 인기 있는 패키지와 유사한 이름으로 패키지를 등록하여 다른 사람들이 실수로 설치하도록 유도할 수 있습니다. npm은 이러한 타이포스쿼트 공격을 감지하고 이러한 패키지의 게시를 차단할 수 있습니다.

이 공격의 변형은 조직이 사용 중인 비공개 패키지와 동일한 이름의 공개 패키지를 등록하는 것입니다. 우리는 비공개 패키지가 공개 레지스트리의 패키지로 대체되지 않도록 [스코프가 있는 패키지](https://github.blog/2021-02-12-avoiding-npm-substitution-attacks/)를 사용할 것을 강력히 권장합니다. npm은 의존성 혼동 공격을 감지할 수 없지만 레지스트리의 악성 패키지에 대해 무관용 정책을 취하고 있습니다. 의존성 혼동 패키지를 발견했다고 생각되면 [알려주시기 바랍니다][report-malware]!

### 기존 패키지를 변경하여 악성 행동 추가

유사한 이름의 패키지를 사용하도록 유도하는 대신, 공격자들은 또한 기존의 인기 있는 패키지에 악성 행동을 추가하려고 시도합니다. Microsoft와 협력하여 npm은 패키지를 스캔하여 알려진 악성 콘텐츠를 찾고, 패키지를 실행하여 악성일 수 있는 새로운 행동 패턴을 찾습니다. 이로 인해 npm 패키지의 악성 콘텐츠가 상당히 감소했습니다. 또한, 우리의 Trust and Safety 팀은 사용자들이 보고한 악성 콘텐츠를 확인하고 제거합니다. 의존성 혼동 공격과 마찬가지로, 우리는 새로운 예시로 탐지 서비스를 지속적으로 업데이트하고 있으므로, 패키지에 악성 행동이 포함되어 있다고 생각되면 [알려주시기 바랍니다][report-malware]!

[configuring-2fa]: /configuring-two-factor-authentication
[email-otp]: /receiving-a-one-time-password-over-email
[report-malware]: /reporting-malware-in-an-npm-package
